<div id="alertAttachDiv">
	<form id ="firstUpdateForm" action="/web/resource/upload" method="post"
        enctype="multipart/form-data">
        <div class="modal-body">
            <div class="form-group">
            <label class="col-sm-3 control-label">上传文件</label>
            <div class="col-sm-5">
                <input type="file" id="uploadFiles" name="uploadFiles">
                <input type="hidden" id="projectId" name="projectId" value="test123"/>
                <input type="hidden" id="refFileList[0].orgName" name="refFileList[0].orgName" value="test123"/>
                <input type="hidden" id="refFileList[0].orgName" name="refFileList[0].filePath" value="test123"/>
                <input type="hidden" id="refFileList[0].orgName" name="refFileList[0].fileName" value="test123"/>
                <input type="hidden" id="refFileList[0].orgName" name="refFileList[0].refType" value="0"/>
                <input type="hidden" id="refFileList[0].orgName" name="refFileList[0].refFileId" value="0123123123"/>
                <input type="hidden" id="refFileList[1].orgName" name="refFileList[1].orgName" value="test123"/>
            </div>
            </div>
        </div>
        <div class="modal-footer">
            <div id="firstUploadSucceed" style="display: none;">
                <strong>新增成功！</strong><span id="firstUploadSucceedMsg"></span>
            </div>
            <div id="firstUploadFailed" style="display: none;">
                <strong>对不起！新增失败</strong><span id="firstUploadFailedMsg"></span>
            </div>
            <!-- <button id="createPeriadBtn" type="submit" class="btn btn-default">确定 </button> -->
            <input type="button" onclick="ajaxSubmit()" value="保存">
        </div>
    </form> 
</div>

<script type="text/javascript">

function ajaxSubmit() {
	$("#firstUpdateForm").ajaxSubmit({
		url : WEB_ROOT + "/resource/upload",
		type : "post",
		dataType : "json",
		success : function(data) {
			alert(data);
		}
	});
	// 为了防止普通浏览器进行表单提交和产生页面导航（防止页面刷新？）返回false
	return false;
}
	


$(function(){
	var page = {
		init : function(){
			var modalId=cjs.modal.modalId($('#alertAttachDiv'));
			cjs.modal.registerReturn(modalId,function(){
				return { return1 : 'a' , return2 : 'b'};
			});
			return modalId ;
		},
		getParams : function(modalId) {
			console.log(JSON.stringify(cjs.modal.params(modalId)));
			return cjs.modal.params(modalId) ;
		}
	} ;
	
	var modalId = page.init() ;
	var params = page.getParams(modalId) ;
})
</script>